import { Story, Canvas, Meta } from '@storybook/addon-docs/blocks';
import skyNavMenu from '../sky-nav/demo/menu.json';
import groundNavMenu from './demo/menu.json';
import organization from './demo/organization.json';
import social from './demo/social.json';
import template from './ground-nav.twig';
import pwaStatsDemo from './demo/pwa-stats.twig';
const menu = { items: [...skyNavMenu.items, ...groundNavMenu.items] };
const defaultArgTypes = {
  buttonLeadIn: {
    type: { name: 'string' },
    defaultValue: 'Let’s discuss your project!',
  },
  buttonTitle: { type: { name: 'string' }, defaultValue: 'Email us' },
  buttonLink: {
    type: { name: 'string' },
    defaultValue: 'mailto:info@cloudfour.com',
  },
  buttonIcon: { type: { name: 'string' }, defaultValue: 'envelope' },
  organizationName: {
    type: { name: 'string' },
    defaultValue: organization.name,
  },
  organizationStreetAddress: {
    type: { name: 'string' },
    defaultValue: organization.address.street_address,
  },
  organizationAddressLocality: {
    type: { name: 'string' },
    defaultValue: organization.address.address_locality,
  },
  organizationAddressRegion: {
    type: { name: 'string' },
    defaultValue: organization.address.address_region,
  },
  organizationPostalCode: {
    type: { name: 'string' },
    defaultValue: organization.address.postal_code,
  },
  organizationAddressCountry: {
    type: { name: 'string' },
    defaultValue: organization.address.address_country,
  },
  organizationEmail: {
    type: { name: 'string' },
    defaultValue: organization.email,
  },
  organizationTelephone: {
    type: { name: 'string' },
    defaultValue: organization.telephone,
  },
  organizationUrl: {
    type: { name: 'string' },
    defaultValue: organization.url,
  },
  organizationFoundingDate: {
    type: { name: 'string' },
    defaultValue: organization.founding_date,
  },
};

<!--
Inline stories disabled so media queries will behave as expected within
embedded examples.
-->

<Meta
  title="Components/Ground Nav"
  parameters={{ docs: { inlineStories: false }, paddings: { disable: true } }}
/>

# Ground Nav

**Note:** This component is currently a work in progress.

The yin to [Sky Nav](/docs/components-sky-nav--dark)'s yang, the Ground Nav sits at the bottom of all our pages. It includes a call to action, contact information, an expanded navigation menu for lost users and any legal copy.

<Canvas>
  <Story
    name="Cloud Four"
    // Currently storybook doesn't have support for nested or grouped args
    // So for now we are just making them all top-level
    // https://github.com/storybookjs/storybook/issues/11525
    // https://github.com/storybookjs/storybook/issues/10979
    argTypes={defaultArgTypes}
  >
    {(args) =>
      template({
        menu,
        social,
        action: {
          lead_in: args.buttonLeadIn,
          title: args.buttonTitle,
          link: args.buttonLink,
          icon: args.buttonIcon,
        },
        organization: {
          name: args.organizationName,
          address: {
            street_address: args.organizationStreetAddress,
            address_locality: args.organizationAddressLocality,
            address_region: args.organizationAddressRegion,
            postal_code: args.organizationPostalCode,
            address_country: args.organizationAddressCountry,
          },
          email: args.organizationEmail,
          telephone: args.organizationTelephone,
          url: args.organizationUrl,
          founding_date: args.organizationFoundingDate,
        },
      })
    }
  </Story>
</Canvas>

The menu’s contents may differ between projects. This example is based on the footer of our [PWA Stats](https://www.pwastats.com/) resource.

<Canvas>
  <Story
    name="PWA Stats"
    argTypes={defaultArgTypes}
    args={{
      buttonLeadIn: 'Help us build this resource!',
      buttonTitle: 'Contribute a story',
      buttonLink:
        'https://github.com/cloudfour/pwastats/issues/new?title=Submission:+New+Story',
      buttonIcon: 'brands/github',
    }}
    parameters={{
      docs: {
        source: {
          code: `{% embed '@cloudfour/components/ground-nav/ground-nav.twig' with {
  "menu": {
    "items": [
      {
        "link": "/does",
        "title": "What We Do",
        "current": true
      },
      {
        "link": "/believes",
        "title": "Our Approach"
      },
      {
        "link": "/made",
        "title": "Our Work"
      },
      {
        "link": "/thinks",
        "title": "Articles"
      },
      {
        "link": "/presents",
        "title": "Speaking"
      },
      {
        "link": "/contributes",
        "title": "Labs"
      },
      {
        "link": "/is",
        "title": "Team"
      },
      {
        "link": "/portland-device-lab",
        "title": "Device Lab"
      },
      {
        "link": "https://cloudfour-patterns.netlify.app/",
        "title": "Patterns"
      },
      {
        "link": "https://www.responsivefieldday.com/",
        "title": "Responsive Field Day"
      }
    ]
  },
  "social": {
    "items": [
      {
        "link": "https://twitter.com/cloudfour",
        "title": "Follow us on Twitter",
        "icon": "brands/twitter"
      },
      {
        "link": "https://github.com/cloudfour",
        "title": "Find us on GitHub",
        "icon": "brands/github"
      },
      {
        "link": "https://www.instagram.com/cloudfourpdx/",
        "title": "Follow us on Instagram",
        "icon": "brands/instagram"
      },
      {
        "link": "https://www.linkedin.com/company/cloud-four",
        "title": "Follow us on LinkedIn",
        "icon": "brands/linkedin"
      }
    ]
  },
  "action": {
    "lead_in": "Help us build this resource!",
    "title": "Contribute a story",
    "link": "https://github.com/cloudfour/pwastats/issues/new?title=Submission:+New+Story",
    "icon": "brands/github"
  },
  "organization": {
    "name": "Cloud Four, Inc.",
    "address": {
      "street_address": "510 SW 3rd Ave, Suite 420",
      "address_locality": "Portland",
      "address_region": "Oregon",
      "postal_code": "97204",
      "address_country": "USA"
    },
    "email": "info@cloudfour.com",
    "telephone": "+1 (503) 290-1090",
    "url": "https://cloudfour.com/",
    "founding_date": "2007-12-13"
  }
} only %}
  {% block kudos %}
    <p class="c-ground-nav__kudos">
      Hosted by <a href="https://www.netlify.com/">Netlify</a>, inspired by <a href="https://wpostats.com/">WPO Stats</a> and <a href="https://developers.google.com/web/showcase/">Google Web Showcase</a>
    </p>
  {% endblock %}
  {% block legal %}
    <p class="c-ground-nav__legal">
      Designed by Cloud Four (<a href="https://github.com/cloudfour/pwastats/blob/master/LICENSE">License</a>)
    </p>
  {% endblock %}
{% endembed %}
`,
        },
      },
    }}
  >
    {(args) =>
      pwaStatsDemo({
        menu,
        social,
        action: {
          lead_in: args.buttonLeadIn,
          title: args.buttonTitle,
          link: args.buttonLink,
          icon: args.buttonIcon,
        },
        organization: {
          name: args.organizationName,
          address: {
            street_address: args.organizationStreetAddress,
            address_locality: args.organizationAddressLocality,
            address_region: args.organizationAddressRegion,
            postal_code: args.organizationPostalCode,
            address_country: args.organizationAddressCountry,
          },
          email: args.organizationEmail,
          telephone: args.organizationTelephone,
          url: args.organizationUrl,
          founding_date: args.organizationFoundingDate,
        },
      })
    }
  </Story>
</Canvas>

## Accessibility

Stay tuned!

## Template Properties

- `action`: Object containing settings for the "call to action" section.
  - `lead_in`: The heading text that precedes the button.
  - `title`: The title of the action link. Named `title` for consistency with menus.
  - `link`: The URL for the action link. Named `link` for consistency with menus.
  - `icon`: Optional key to one of [our icons](/docs/design-icons--page) for display in the link.
- `organization`: Object containing Cloud Four details for contact information and copyright. Structure and property names are based on the [the Organization schema](https://schema.org/Organization).
  - `name`
  - `address`
    - `street_address`
    - `address_locality` (city)
    - `address_region` (state)
    - `postal_code` (zip)
    - `address_country`
  - `email`
  - `telephone`
  - `url`
  - `founding_date`: Used for start date of default legal content.
- `menu`: An object containing navigation menu `items` to iterate over in the same structure as that expected by [Timber menus](https://timber.github.io/docs/guides/menus/).
- `social`: The same structure as `menu` but for social links. Each item must also contain an `icon` property corresponding to a key from [our icon library](/docs/design-icons--page).
