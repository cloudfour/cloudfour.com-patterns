import { Meta, Preview, Story } from '@storybook/addon-docs/blocks';
import { withKnobs, select } from '@storybook/addon-knobs';
import { useEffect } from '@storybook/client-api';
import headingsDemo from './demo/headings.twig';
import paragraphsDemo from './demo/paragraphs.twig';
import blockquoteDemo from './demo/blockquote.twig';
import unorderedListDemo from './demo/list-unordered.twig';
import orderedListDemo from './demo/list-ordered.twig';
import descriptionListDemo from './demo/list-description.twig';
import codeBlockDemo from './demo/code-block.twig';
import inlineElementsDemo from './demo/inline-elements.twig';
import figureDemo from './demo/figure.twig';
import figureImage from './demo/tiny-web-stacks.png';
import '../../vendor/prism/config.js';

<Meta title="Design/Typography" decorators={[withKnobs]} />

# Typography

This section is currently a work in progress.

## Specimens

<Preview>
  <Story name="Headings">{headingsDemo}</Story>
</Preview>

<Preview>
  <Story name="Paragraphs">{paragraphsDemo}</Story>
</Preview>

Blockquote children get some default spacing. For finer control of this spacing, use [the rhythm object](/?path=/docs/objects-rhythm--default-story).

<Preview>
  <Story name="Blockquote">{blockquoteDemo}</Story>
</Preview>

<Preview>
  <Story name="Unordered List">{unorderedListDemo}</Story>
  <Story name="Ordered List">{orderedListDemo}</Story>
</Preview>

<Preview>
  <Story name="Description List">{descriptionListDemo}</Story>
</Preview>

Syntax highlighting is done via [Prism](https://prismjs.com/) because it's extremely lightweight compared to other highlighting libraries.

<Preview>
  <Story name="Code Block">
    {() => {
      /**
       * The `useEffect` function is necessary because of loading order of
       * Storybook stories relative to JavaScript. This is very poorly
       * documented!
       *
       * @see https://github.com/storybookjs/storybook/pull/7791
       * @see https://github.com/storybookjs/storybook/issues/7786#issuecomment-547207581
       */
      useEffect(() => Prism.highlightAll());
      return codeBlockDemo({
        language: select('language', ['', 'html', 'css', 'javascript'], 'html'),
      });
    }}
  </Story>
</Preview>

<Preview>
  <Story name="Inline Elements">{inlineElementsDemo}</Story>
</Preview>

## Figure

In the future we may want to add a separate section for default elements like `<figure>`.

<Preview>
  <Story name="Figure">
    {figureDemo({
      src: figureImage,
    })}
  </Story>
</Preview>
