import { Canvas, Meta, Story } from '@storybook/addon-docs';
import tokens from '../../compiled/tokens/js/tokens.js';
import imageDemo from './demo/image.twig';
import imageDemoImgSrc from './demo/design-system-navigation.png';
import pictureDemo from './demo/picture.twig';
import pictureDemoJpgSrc from './demo/twilight.jpg';
import pictureDemoWebpSrc from './demo/twilight.webp';
import videoDemo from './demo/video.twig';
import youtubeVideoDemo from './demo/youtube-video.twig';
import penDemo from './demo/pen.twig';
const aspectRatioTokens = tokens.number.aspect_ratio;
const aspectRatioUtilityClasses = [
  ...Object.keys(aspectRatioTokens).map((key) => `u-aspect-${key}`),
];
const defaultArgTypes = {
  aspectRatioClass: {
    name: 'Aspect ratio utility class',
    options: aspectRatioUtilityClasses,
    type: 'string',
    control: { type: 'select' },
  },
  aspectRatio: {
    name: '--aspect-ratio',
    type: 'string',
  },
};
const defaultArgs = {
  aspectRatioClass: 'u-aspect-wide',
};

<Meta title="Utilities/Aspect Ratio" />

# Aspect Ratio

Specifying aspect ratios for imagery and embedded media is important to prevent jarring layout shifts as content loads. But specifying width and height may not work for all types of embedded media. The `u-aspect-*` utility classes use the [`aspect-ratio` CSS property](https://developer.mozilla.org/en-US/docs/Web/CSS/aspect-ratio) to maintain intended aspect ratio.

There are two methods for specifying the desired aspect ratio:

1. Via the `u-aspect-*` utility class. All of our [aspect ratio tokens](/docs/design-tokens-aspect-ratio--page) are supported. Example: `u-aspect-wide`
1. Via the `--aspect-ratio` custom property. This can be helpful for one-off images in articles or other content that do not conform to a typical size. Example: `--aspect-ratio: 320/480`

## Basic Examples

### Image

<Canvas>
  <Story name="Image" args={defaultArgs} argTypes={defaultArgTypes}>
    {(args) => imageDemo({ ...args, src: imageDemoImgSrc })}
  </Story>
</Canvas>

### Picture

<Canvas>
  <Story name="Picture" args={defaultArgs} argTypes={defaultArgTypes}>
    {(args) =>
      pictureDemo({
        ...args,
        jpgSrc: pictureDemoJpgSrc,
        webpSrc: pictureDemoWebpSrc,
      })
    }
  </Story>
</Canvas>

### Video

Using a `<video>` element.

<Canvas>
  <Story name="Video" args={defaultArgs} argTypes={defaultArgTypes}>
    {(args) => videoDemo(args)}
  </Story>
</Canvas>

### YouTube Video

Using an `iframe` element.

<Canvas>
  <Story name="YouTube Video" args={defaultArgs} argTypes={defaultArgTypes}>
    {(args) => youtubeVideoDemo(args)}
  </Story>
</Canvas>

## Responsive Usage

An additional benefit of modifier classes is support for breakpoint-specific ratios. This can be helpful for interactive embeds (CodePen, etc.) or simply for art direction.

In this example, the aspect ratio starts square but becomes wider with each successive breakpoint. All [breakpoint tokens](/docs/design-tokens-breakpoint--page) are supported.

<Canvas>
  <Story
    name="Responsive"
    args={{
      class:
        'u-aspect-square u-aspect-full@s u-aspect-wide@m u-aspect-cinema@l',
    }}
  >
    {(args) => penDemo(args)}
  </Story>
</Canvas>
