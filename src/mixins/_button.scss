@use "../compiled/scss/tokens";
@use "./focus";
@use "./ms";
@use "./unit";

/**
 * Button object
 *
 * 1. More overtly actionable cursor appearance. Recently this tweak has come
 *    with some contention, but our experience has been that the average user
 *    doesn't differentiate cursor styles between different styles of action.
 * 2. Although we will be overtly setting some typographic properties, the
 *    shorthand is helpful for completely overriding all system font styles as
 *    a starting point.
 * 3. We set a height to coordinate consistently with `c-input`. Unfortunately
 *    browsers don't consistently size inputs without setting `height`.
 */

@mixin default {
  background: tokens.$color-brand-primary;
  border-color: tokens.$color-brand-primary-dark;
  border-radius: tokens.$size-border-radius-medium;
  border-style: solid;
  border-width: tokens.$size-edge-medium;
  color: tokens.$color-text-light-emphasis;
  cursor: pointer; /* 1 */
  display: inline-block;
  font: inherit; /* 2 */
  font-style: normal;
  font-weight: tokens.$number-font-weight-semibold;
  height: tokens.$size-height-control-default; /* 3 */
  line-height: normal;
  padding: tokens.$size-padding-control-vertical
    tokens.$size-padding-control-horizontal;
  position: relative;
  text-align: center;
  text-decoration: none;
  transition: filter tokens.$time-transition-slow tokens.$ease-out,
    transform tokens.$time-transition-quick tokens.$ease-out;
  user-select: none;

  /**
   * Transform, opacity and filter changes are performant and will work across
   * many more stylistic modifiers than specific color shifts.
   */

  &:hover {
    filter: brightness(tokens.$number-brightness-control-brighten);
    transform: scale(tokens.$number-scale-effect-grow);
  }

  &:active {
    filter: brightness(tokens.$number-brightness-control-dim);
    transform: scale(tokens.$number-scale-effect-shrink);
  }

  &:disabled {
    cursor: not-allowed;
    filter: grayscale(60%);
    opacity: 0.85;
    transform: none;
  }

  @include focus.focus-visible {
    box-shadow: 0 0 0 tokens.$size-edge-large
      tokens.$color-brand-primary-lighter;
  }

  .t-dark & {
    background-color: tokens.$color-brand-primary-dark;
    border-color: tokens.$color-brand-primary-darker;
  }
}

/**
 * Modifier: Secondary
 */

@mixin secondary {
  border-color: tokens.$color-brand-primary-light;
  color: tokens.$color-brand-primary;

  &,
  .t-dark & {
    background-color: transparent;
  }

  .t-dark & {
    border-color: tokens.$color-brand-primary-dark;
    color: tokens.$color-text-light-emphasis;
  }
}

/**
 * Modifier: Tertiary
 */

@mixin tertiary {
  color: tokens.$color-brand-primary;

  &,
  .t-dark & {
    background-color: transparent;
    border-color: transparent;
  }

  .t-dark & {
    color: tokens.$color-text-light-emphasis;
  }
}
