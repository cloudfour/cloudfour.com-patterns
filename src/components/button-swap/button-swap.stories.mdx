import { Canvas, Meta, Story } from '@storybook/addon-docs';
import { makeTwigInclude } from '../../make-twig-include.js';
import { useEffect } from '@storybook/client-api';
import buttonSwap from './button-swap.twig';

<Meta
  title="Components/Button Swap"
  argTypes={{
    content_start_icon: {
      options: ['bell', 'magnifying-glass'],
      type: { name: 'string' },
      control: { type: 'select' },
    },
    initial_label: { type: { name: 'string' } },
    initial_visual_label: { type: { name: 'string' } },
    swapped_label: { type: { name: 'string' } },
    swapped_visual_label: { type: { name: 'string' } },
  }}
/>

# Button Swap

The Button Swap component was built with the article Push Notifications use case in mind. It has two buttons that are swapped on click representing two visual states accompanied with visually hidden text for a more inclusive experience.

You have the ability to pass `initialCallback` and `swappedCallback` callback functions to the `initButtonSwap` initialization function to add custom actions for when each of the buttons is clicked.

<Canvas>
  <Story
    name="Default"
    inline={false}
    args={{
      initial_label: 'Notifications have been turned off.',
      initial_visual_label: 'Give me all the notifications!',
      swapped_label: 'Notifications have been turned on.',
      swapped_visual_label: 'Just kidding, stop notifications, please.',
    }}
    parameters={{
      docs: {
        source: {
          code: makeTwigInclude(
            '@cloudfour/components/button-swap/button-swap.twig',
            {
              initial_label: 'Notifications have been turned off.',
              initial_visual_label: 'Give me all the notifications!',
              swapped_label: 'Notifications have been turned on.',
              swapped_visual_label: 'Just kidding, stop notifications, please.',
            }
          ),
        },
      },
    }}
  >
    {(args) => buttonSwap(args)}
  </Story>
</Canvas>

## Template Properties

- `class` (string): Appends to the CSS class of the root element.
- `button_class` (string): Appends to the CSS class of the button element.
- `content_start_icon` (string, default `'bell'`): The button [icon](/docs/design-icons--page) (the same icon is applied to both buttons).
- `initial_label` (string, default `'Unsubscribed from notifications'`): The first button visually hidden text.
- `initial_visual_label` (string, default `'Get notifications'`): The first button label.
- `swapped_label` (string, default `'Subscribed to notifications'`): The second button visually hidden text.
- `swapped_visual_label` (string, default `'Turn off notifications'`): The second button label.

## JavaScript

This component does not come with built-in JavaScript for its functionality; you will need to write your own JS to use it.

## Unsupported features

The following features are not supported but can be in the future if the need arises. The decision was made to forego these features for now since a use case did not exist when developing this component.

- No `content_end_icon` template property support
- No `content_start`, `content`, or `content_end` block support
