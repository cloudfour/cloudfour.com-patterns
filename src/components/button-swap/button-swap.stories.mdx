import { Story, Canvas, Meta } from '@storybook/addon-docs/blocks';
import { useEffect } from '@storybook/client-api';
// The '!!raw-loader!' syntax is a non-standard, Webpack-specific, syntax.
// See: https://github.com/webpack-contrib/raw-loader#examples
// For now, it seems likely Storybook is pretty tied to Webpack, therefore, we are
// okay with the following Webpack-specific raw loader syntax. It's better to leave
// the ESLint rule enabled globally, and only thoughtfully disable as needed (e.g.
// within a Storybook docs page and not within an actual component).
// This can be revisited in the future if Storybook no longer relies on Webpack.
// eslint-disable-next-line @cloudfour/import/no-webpack-loader-syntax
// import iconButtonCustomDemoSource from '!!raw-loader!./demo/icon-button-custom-demo.twig';
// import iconButtonCustomDemo from './demo/icon-button-custom-demo.twig';
import buttonSwap from './button-swap.twig';
import { initButtonSwap } from './button-swap.ts';
// Helper function to initialize toggling button JS
const buttonSwapStory = (args) => {
  useEffect(() => {
    const { destroy } = initButtonSwap(
      document.querySelector('.js-c-button-swap'),
      {
        firstBtnCallback: () => console.log('Subscribed!'),
        secondBtnCallback: () => console.log('Unsubscribed!'),
      }
    );
    return destroy;
  }, []);
  return buttonSwap(args);
};

<Meta
  title="Components/Button Swap"
  argTypes={{
    first_button_visually_hidden_text: { type: { name: 'string' } },
    first_button_label: { type: { name: 'string' } },
    second_button_visually_hidden_text: { type: { name: 'string' } },
    second_button_label: { type: { name: 'string' } },
  }}
/>

# Button Swap

The `c-button-swap` class may be applied to button and link elements. The button appears filled by default so that the actionable element is clearly distinguished from surrounding text.

<Canvas>
  <Story name="Default" inline={false}>
    {(args) => buttonSwapStory(args)}
  </Story>
</Canvas>

## Template Properties

- `content_start_icon` (string, default `'bell'`): The button icon (applied to both buttons).
- `first_button_visually_hidden_text` (string, default `'Unsubscribed from notifications'`): The first button visually hidden text.
- `first_button_label` (string, default `'Get notifications'`): The first button label.
- `second_button_visually_hidden_text` (string, default `'Subscribed to notifications'`): The second button visually hidden text.
- `second_button_label` (string, default `'Turn off notifications'`): The second button label.
