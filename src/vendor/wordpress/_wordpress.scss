@use "../../design-tokens/colors.yml";
@use "../../design-tokens/sizes.yml";
@use "../../mixins/button";
@use "../../mixins/table";

/**
 * Gutenberg block: Button
 * Applies our pattern library styles to buttons generated via Gutenberg blocks.
 */

$wp-button-gap: sizes.$list-inline-gap;

/**
 * 1. Align buttons with outer parent
 * 2. Complete half-gaps left by buttons
 */

.wp-block-buttons {
  display: flex;
  flex-wrap: wrap;
  margin: $wp-button-gap * -1;
  padding: $wp-button-gap / 2;

  /**
   * If this has content before, assume it is prose content and add back
   * some margin.
   */
  &:not(:first-child) {
    margin-top: sizes.$rhythm-space-generous - $wp-button-gap;
  }

  /**
   * If this has content after, assume it is prose content and add back
   * some margin.
   */
  &:not(:last-child) {
    margin-bottom: sizes.$rhythm-space-generous - $wp-button-gap;
  }
}

/**
 * 1. Prevent inherited display flex styling from crushing layout
 * 2. Add half-gaps (will add up to full gutters)
 */
.wp-block-button {
  flex: none; /* 1 */
  padding: $wp-button-gap / 2; /* 2 */

  .wp-block-button__link {
    @include button.default;
  }

  &.is-style-outline .wp-block-button__link {
    @include button.secondary;
  }
}

/**
 * Gutenberg block: File download button
 * Applies our pattern library styles to gutenberg file download blocks.
 */

.wp-block-file {
  /**
   * 1. Prevents stacked file buttons from collapsing on each other. 
   */

  + .wp-block-file {
    margin-top: $wp-button-gap; /* 1 */
  }

  /**
   * 1. Prevents default WP styling from modifying buttons opacity.  
   */

  .wp-block-file__button,
  a:not(.wp-block-file__button) {
    @include button.default;
    opacity: inherit !important; /* 1 */
  }

  /**
   * 1. Prevents default WP styling from modifying buttons opacity and
   *    text color.  
   */

  &.c-button--secondary .wp-block-file__button,
  &.c-button--secondary :not(.wp-block-file__button) {
    @include button.secondary;
    color: inherit !important; /* 1 */
    opacity: inherit !important; /* 1 */
  }

  /**
   * 1. Prevents default WP styling from modifying buttons opacity and
   *    text color.  
   */

  &.c-button--tertiary .wp-block-file__button,
  &.c-button--tertiary :not(.wp-block-file_button) {
    @include button.tertiary;
    color: inherit !important; /* 1 */
    opacity: inherit !important; /* 1 */
  }
}

/**
 * Gutenberg block: Table
 * Applies our pattern library styles to tables generated via Gutenberg blocks.
 */

/**
 * Default table
 */

.wp-block-table table td,
.wp-block-table table th {
  @include table.t-container;
}

.wp-block-table table th {
  @include table.t-heading;
}

.wp-block-table table thead {
  @include table.t-head;
}

.wp-block-table table tfoot {
  @include table.t-foot;
}

.wp-block-table table caption {
  @include table.t-caption;
}

/**
 * Striped table
 */
.wp-block-table.is-style-stripes {
  border-bottom: 0;

  & tbody tr:nth-of-type(2n - 1) {
    @include table.t-striped;
  }
}

/**
 * Numeric table
 */
.wp-block-table.c-table--numeric table {
  @include table.t-numeric;

  & th {
    text-align: right;
  }
}
