import { Story, Preview, Meta } from '@storybook/addon-docs/blocks';

<Meta title="Third-Party/Gutenberg" />

# WordPress Gutenberg Blocks

The Wordpress Gutenberg editor is a block-based page builder. The editor comes with
a variety of core blocks. Of those, a subset automatically generate markup with one
or more `wp-block-`-prefixed classes. These are the blocks documented below.

Each block has controls that can modify the generated output. Where relevant, the
additional markup and/or classes that may be generated are also documented.

## Quote

The quote block has a base class of `wp-block-quote`. It has a control to add an
optional `is-style-large` class.

<Preview>
  <Story name="core/quote" height="150px">
    {`<blockquote class="wp-block-quote is-style-large">
      <p>In quoting others, we cite ourselves.</p><cite>Julio Cortázar</cite>
    </blockquote>`}
  </Story>
</Preview>

## Image

The image block is wrapped in a `figure` element with the `wp-block-image` class.

Inputs are available to set `alt` text, `width`, and `height` attributes.

Controls set either the `is-style-default` (no masking) or `is-style-circle-mask`
class on the wrapper element. One of these classes is always present.

Additional controls can add wrapper classes based on generated `srcset` options:
`size-full`, `size-large`, `size-medium`, or `size-thumbnail`. Further resizing
adds the `is-resized` class to the wrapper.

Adding caption text to the image generates a `figcaption` element before the closing
wrapper tag.

<Preview>
  <Story name="core/image" height="500px">
    {`<figure class="wp-block-image size-large is-style-default">
        <img
          src="https://s.w.org/images/core/5.3/MtBlanc1.jpg"
          alt="Mont Blanc"
          class="wp-image-130"
          srcset="
            https://s.w.org/images/core/5.3/MtBlanc1.jpg         500w,
            https://s.w.org/images/core/5.3/MtBlanc1-300x225.jpg 300w
          "
          sizes="(max-width: 500px) 100vw, 500px"
        />
        <figcaption>Mont Blanc appears—still, snowy, and serene.</figcaption>
      </figure>`}
  </Story>
</Preview>

## Gallery (images)

The gallery block is wrapped in a `figure` element with the `wp-block-gallery` class.

In the block's settings, the user can choose a number of columns, which adds a `columns-x` class.

The gallery itself is a `ul` element with the class `blocks-gallery-grid` and each
item has a class of `blocks-gallery-item`

A single control sets whether image thumbnails within the gallery are cropped to align
within the grid, adding an `is-cropped` class to the wrapper element

Controls can update items to link to either either their source or their
attachment page. Either selection wraps the media element in an `a` tag. By default,
items are not wrapped in links.

Adding a caption creates a `figcaption` element before the closing wrapper tag.

<Preview>
  <Story name="core/gallery" height="500px">
    {`<figure class="wp-block-gallery columns-2 is-cropped">
      <ul class="blocks-gallery-grid">
        <li class="blocks-gallery-item">
          <figure>
            <a href="https://s.w.org/images/core/5.3/Glacial_lakes%2C_Bhutan.jpg">
              <img src="https://s.w.org/images/core/5.3/Glacial_lakes%2C_Bhutan.jpg" />
            </a>
          </figure>
        </li>
        <li class="blocks-gallery-item">
          <figure>
            <a href="https:/end wp-themes.com/twentytwenty/?page_id=2">
              <img src="https://s.w.org/images/core/5.3/Sediment_off_the_Yucatan_Peninsula.jpg" />
            </a>
          </figure>
        </li>
        <li class="blocks-gallery-item">
          <figure>
            <img src="https://s.w.org/images/core/5.3/Biologia_Centrali-Americana_-_Cantorchilus_semibadius_1902.jpg" />
          </figure>
        </li>
        <li class="blocks-gallery-item">
          <figure>
            <img src="https://s.w.org/images/core/5.3/Windbuchencom.jpg" />
          </figure>
        </li>
      </ul>
      <figcaption class="blocks-gallery-caption">A gallery caption</figcaption>
    </figure>`}
  </Story>
</Preview>

## Button

The button block creates one or more `div`s with class `wp-block-button`, each containing
an `a` element with a class of `wp-block-button__link`.

An additional container holds each button block (one or more buttons), and has
a class of `wp-block-buttons`.

If chosen, a button can have only an outline (no fill color), which adds the `is-style-outline`
class on the `.wp-block-button` element.

Controls allow each button to have custom text color, background color or gradient, and border
radius. These are all set as inline styles, but additional classes are also added
to the link, e.g., `has-text-color` and `has-background`.

The button link may or may not have an `href` URL, and the user can also control the
`rel` and `target` attributes.

<Preview>
  <Story name="core/button" height="100px">
    {`<div class="wp-block-buttons">
        <div class="wp-block-button">
          <a class="wp-block-button__link" href="https:/end wp-themes.com/twentytwenty/" style="border-radius:50px" target="_blank" rel="noopener noreferrer">
            Button
          </a>
        </div>
    </div>`}
  </Story>
</Preview>

## Code

The code block adds the class `wp-block-code` to a `pre` tag wrapping content inside
`code` tags.

<Preview>
  <Story name="core/code" height="350px">
    {`<pre class="wp-block-code">
      <code>
        // A "block" is the abstract term used
        // to describe units of markup that,
        // when composed together, form the
        // content or layout of a page.
        registerBlockType( name, settings );
      </code>
    </pre>`}
  </Story>
</Preview>

## Columns

The columns block creates a set of nested `div`s. The top wrapper `div` has a class
of `wp-block-columns` and each `div` below that has a class of `wp-block-column`.
Each column can contain arbitrary content.

Controls set up the sizing of columns by adding an inline style with a `flex-basis`
declaration. Therefore, it's assumed that the `.wp-block-columns` wrapper must be
set to `display: flex`.

<Preview>
  <Story name="core/columns" height="350px">
    {`<div class="wp-block-columns">
        <div class="wp-block-column" style="flex-basis:37.5%">
          <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent et eros
            eu felis.
          </p>
          <figure class="wp-block-image">
            <img src="https://s.w.org/images/core/5.3/Windbuchencom.jpg" alt="" />
          </figure>
          <p>Suspendisse commodo neque lacus, a dictum orci interdum et.</p>
        </div>
        <div class="wp-block-column" style="flex-basis:62.5%">
          <p>
            Etiam et egestas lorem. Vivamus sagittis sit amet dolor quis lobortis.
            Integer sed fermentum arcu, id vulputate lacus. Etiam fermentum sem eu
            quam hendrerit.
          </p>
          <p>
            Nam risus massa, ullamcorper consectetur eros fermentum, porta aliquet
            ligula. Sed vel mauris nec enim.
          </p>
        </div>
      </div>`}
  </Story>
</Preview>

## Cover

Adds an image or video with a text overlay. The cover block is a `div` with a class
of `wp-block-cover`. This `div` has a `style` attribute by default that sets itself
`background-image` and `-color`.

Controls set classes on the wrapper that adjust the opacity of the `background-color`.
The base class for this control is `has-background-dim`, and a percentage is specified
in a modifier class, e.g., `has-background-dim-40`.

Another control results in setting `background-attachment` to `fixed`, by adding
the class `has-parallax`.

The text overlay inside the cover block its own `div` wrapper with a class of
`wp-block_cover__inner-container`.

<Preview>
  <Story name="core/cover" height="350px">
    {`<div
        class="wp-block-cover has-background-dim-40 has-background-dim has-parallax"
        style="background-image:url(https://s.w.org/images/core/5.3/Windbuchencom.jpg);background-color:#065174"
      >
        <div class="wp-block-cover__inner-container">
          <p style="font-size:48px" class="has-text-align-center">
            <strong>Snow Patrol</strong>
          </p>
        </div>
      </div>`}
  </Story>
</Preview>

### Cover - Video Variant

<Preview>
  <Story name="core/cover/video" height="500px">
    {`<div class="wp-block-cover has-background-dim">
        <div class="vsc-controller" data-vscid="g0pcyj7av">
        </div>
        <video
          class="wp-block-cover__video-background"
          autoplay="false"
          muted="true"
          loop="false"
          src="http://mirrors.standaloneinstaller.com/video-sample/dolbycanyon.m4v"
          data-origwidth="0"
          data-origheight="0"
          style="width: 580px;"
          data-vscid="g0pcyj7av">
        </video>
        <div class="wp-block-cover__inner-container">
          <p class="has-text-align-center has-large-font-size">Video</p>
        </div>
      </div>`}
  </Story>
</Preview>
