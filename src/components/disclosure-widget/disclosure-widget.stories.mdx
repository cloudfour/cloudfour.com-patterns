import { Story, Canvas, Meta } from '@storybook/addon-docs';
import { useEffect } from '@storybook/client-api';
import template from './disclosure-widget.twig';
import { initDisclosureWidget } from './disclosure-widget.ts';
// Helper function to initialize toggling button JS
const templateStory = (args) => {
  useEffect(() => {
    const templateEls = [
      ...document.querySelectorAll('.js-disclosure-widget'),
    ].map((templateEl) => initDisclosureWidget(templateEl));
    return () => {
      for (const templateEl of templateEls) templateEl.destroy();
    };
  });
  return template(args);
};

<Meta title="Components/Disclosure Widget" />

# Disclosure Widget

@TODO Update this!

Displays a Disclosure Widget, or set of Disclosure Widgets, with optional meta content.

<Canvas>
  <Story
    name="Basic usage"
    args={{
      body_content_id: 'example-demo',
    }}
  >
    {(args) => templateStory(args)}
  </Story>
</Canvas>

## Template Properties

`class` (string): CSS class(es) to append to the root element

`Disclosure Widgets` (array): Array of [Disclosure Widget objects](https://timber.github.io/docs/reference/timber-user/#properties) of the type:

```ts
 {
   name: string | () => string;
   avatar: string | () => string;
   link: string | () => string;
 }
```

`Disclosure Widget_prefix` (optional, string, default "By"): Used to create a more
accessible user experience by adding visually hidden text, prefixes the Disclosure Widget name (e.g. "By Arianna Chau")

`meta` (optional, string): Extra information to be rendered below the Disclosure Widget name(s)

`date` (optional, date object): Represents a publication date

`date_prefix` (optional, string, default "Published on"): Used to create a more
accessible user experience by adding visually hidden text, prefixes the date value (e.g. "Published on March 31st, 2021")
