import { Story, Canvas, Meta } from '@storybook/addon-docs/blocks';
import { useEffect } from '@storybook/client-api';
// The '!!raw-loader!' syntax is a non-standard, Webpack-specific, syntax.
// See: https://github.com/webpack-contrib/raw-loader#examples
// For now, it seems likely Storybook is pretty tied to Webpack, therefore, we are
// okay with the following Webpack-specific raw loader syntax. It's better to leave
// the ESLint rule enabled globally, and only thoughtfully disable as needed (e.g.
// within a Storybook docs page and not within an actual component).
// This can be revisited in the future if Storybook no longer relies on Webpack.
// eslint-disable-next-line @cloudfour/import/no-webpack-loader-syntax
// import iconButtonCustomDemoSource from '!!raw-loader!./demo/icon-button-custom-demo.twig';
// import iconButtonCustomDemo from './demo/icon-button-custom-demo.twig';
import buttonSwap from './button-swap.twig';
import { initButtonSwap } from './button-swap.ts';
// Helper function to initialize toggling button JS
const buttonSwapStory = (args) => {
  useEffect(() => {
    const { destroy } = initButtonSwap(
      document.querySelector('.js-c-button-swap'),
      {
        subscribeCallback: () => console.log('Subscribed!'),
        unsubscribeCallback: () => console.log('Unsubscribed!'),
      }
    );
    return destroy;
  }, []);
  return buttonSwap(args);
};

<Meta title="Components/Button Swap" />

# Button Swap

The `c-button-swap` class may be applied to button and link elements. The button appears filled by default so that the actionable element is clearly distinguished from surrounding text.

<Canvas>
  <Story name="Default" inline={false}>
    {(args) => buttonSwapStory(args)}
  </Story>
</Canvas>

## Template Properties

- `aria_expanded` (string, `'true'`/`'false'`): Sets the button's `aria-expanded` attribute.
- `aria_pressed` (string, `'true'`/`'false'`): Sets the button's `aria-pressed` attribute.
- `class` (string): Append a class to the root element.
- `content_start_icon` (string): The name of the [icon](/docs/design-icons--page) to render in the `content_start` block.
- `content_end_icon` (string): The name of the [icon](/docs/design-icons--page) to render in the `content_end` block.
- `disabled` (boolean): Sets the button's `disabled` attribute.
- `href` (string): Converts the button to an anchor element and assigns the `href` value. Defaults to `#` if `a` is passed as the `tag_name`.
- `label` (string, default `'Hello world'`): Sets the button's text content.
- `tag_name` (string, default `'button'`): The tag for the button. Uses a `button` by default, an `a` when an `href` value is passed.
- `type` (string): Sets the button's `type` value. If none is passed the browser will default to `submit` or `button` depending on whether the button is in a form.

## Template Blocks

- `content_start`: Block to add content before the Button `content` block.
- `content`: Block to add Button elements.
- `content_end`: Block to add content after the Button `content` block.

## See Also

See the [Button Group object](/docs/objects-button-group--default-story) to align a group of related Button components.
