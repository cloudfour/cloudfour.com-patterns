import { Meta, Story } from '@storybook/addon-docs';
import { basename, extname } from 'path';
import hljs from 'highlight.js';
import sampleDemo from '../prism/demo/sample.twig';
// Load samples directory as "raw" text
const samplesDir = require.context('!!raw-loader!../prism/demo/samples', false);
// Initialize an object to store sample content in
const samples = {};
// For each sample, fetch its content and build an object for our template
for (const key of samplesDir.keys()) {
  const filename = basename(key);
  const ext = extname(key);
  const name = filename.replace(ext, '');
  const content = samplesDir(key).default;
  const language = [name, ext.slice(1)].find(
    (val) => hljs.getLanguage(val) !== undefined
  );
  const html = language && hljs.highlight(content, { language }).value;
  samples[name] = { filename, name, ext, content, html };
}

<Meta title="Vendor/Highlight" />

# Highlight

TODO!

## Supported Languages

<Story name="Bash, Shell">{sampleDemo(samples.bash)}</Story>

<Story name="CSS">{sampleDemo(samples.css)}</Story>

<Story name="Handlebars">{sampleDemo(samples.handlebars)}</Story>

<Story name="JavaScript">{sampleDemo(samples.js)}</Story>

<Story name="JSON">{sampleDemo(samples.json)}</Story>

<Story name="Liquid">{sampleDemo(samples.liquid)}</Story>

<Story name="Markup, HTML">{sampleDemo(samples.markup)}</Story>

<Story name="PHP">{sampleDemo(samples.php)}</Story>

<Story name="React JSX">{sampleDemo(samples.jsx)}</Story>

<Story name="React TSX">{sampleDemo(samples.tsx)}</Story>

<Story name="Sass (SCSS)">{sampleDemo(samples.scss)}</Story>

<Story name="TOML">{sampleDemo(samples.toml)}</Story>

<Story name="Twig">{sampleDemo(samples.twig)}</Story>

<Story name="TypeScript">{sampleDemo(samples.typescript)}</Story>

<Story name="YAML">{sampleDemo(samples.yaml)}</Story>
