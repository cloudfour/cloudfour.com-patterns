import { Story, Canvas, Meta } from '@storybook/addon-docs/blocks';
import skyNavMenu from '../sky-nav/demo/menu.json';
import groundNavMenu from './demo/menu.json';
import organization from './demo/organization.json';
import social from './demo/social.json';
import template from './ground-nav.twig';
import pwaStatsDemo from './demo/pwa-stats.twig';
const menu = { items: [...skyNavMenu.items, ...groundNavMenu.items] };
const defaultArgTypes = {
  buttonLeadIn: {
    type: { name: 'string' },
    defaultValue: 'Let’s discuss your project!',
  },
  buttonTitle: { type: { name: 'string' }, defaultValue: 'Email us' },
  buttonLink: {
    type: { name: 'string' },
    defaultValue: 'mailto:info@cloudfour.com',
  },
  buttonIcon: { type: { name: 'string' }, defaultValue: 'envelope' },
  organizationName: {
    type: { name: 'string' },
    defaultValue: organization.name,
  },
  organizationStreetAddress: {
    type: { name: 'string' },
    defaultValue: organization.address.streetAddress,
  },
  organizationAddressLocality: {
    type: { name: 'string' },
    defaultValue: organization.address.addressLocality,
  },
  organizationAddressRegion: {
    type: { name: 'string' },
    defaultValue: organization.address.addressRegion,
  },
  organizationPostalCode: {
    type: { name: 'string' },
    defaultValue: organization.address.postalCode,
  },
  organizationAddressCountry: {
    type: { name: 'string' },
    defaultValue: organization.address.addressCountry,
  },
  organizationEmail: {
    type: { name: 'string' },
    defaultValue: organization.email,
  },
  organizationTelephone: {
    type: { name: 'string' },
    defaultValue: organization.telephone,
  },
  organizationUrl: {
    type: { name: 'string' },
    defaultValue: organization.url,
  },
  organizationFoundingDate: {
    type: { name: 'string' },
    defaultValue: organization.foundingDate,
  },
};

<!--
Inline stories disabled so media queries will behave as expected within
embedded examples.
-->

<Meta
  title="Components/Ground Nav"
  parameters={{ docs: { inlineStories: false }, paddings: { disable: true } }}
/>

# Ground Nav

**Note:** This component is currently a work in progress.

The yin to [Sky Nav](/docs/components-sky-nav--dark)'s yang, the Ground Nav sits at the bottom of all our pages. It includes a call to action, contact information, an expanded navigation menu for lost users and any legal copy.

<Canvas>
  <Story
    name="Cloud Four"
    // Currently storybook doesn't have support for nested or grouped args
    // So for now we are just making them all top-level
    // https://github.com/storybookjs/storybook/issues/11525
    // https://github.com/storybookjs/storybook/issues/10979
    argTypes={defaultArgTypes}
  >
    {(args) =>
      template({
        menu,
        social,
        action: {
          leadIn: args.buttonLeadIn,
          title: args.buttonTitle,
          link: args.buttonLink,
          icon: args.buttonIcon,
        },
        organization: {
          name: args.organizationName,
          address: {
            streetAddress: args.organizationStreetAddress,
            addressLocality: args.organizationAddressLocality,
            addressRegion: args.organizationAddressRegion,
            postalCode: args.organizationPostalCode,
            addressCountry: args.organizationAddressCountry,
          },
          email: args.organizationEmail,
          telephone: args.organizationTelephone,
          url: args.organizationUrl,
          foundingDate: args.organizationFoundingDate,
        },
      })
    }
  </Story>
</Canvas>

The menu’s contents may differ between projects. This example is based on the footer of our [PWA Stats](https://www.pwastats.com/) resource.

<Canvas>
  <Story
    name="PWA Stats"
    argTypes={defaultArgTypes}
    args={{
      buttonLeadIn: 'Help us build this resource!',
      buttonTitle: 'Contribute a story',
      buttonLink:
        'https://github.com/cloudfour/pwastats/issues/new?title=Submission:+New+Story',
      buttonIcon: 'brands/github',
    }}
  >
    {(args) =>
      pwaStatsDemo({
        menu,
        social,
        action: {
          leadIn: args.buttonLeadIn,
          title: args.buttonTitle,
          link: args.buttonLink,
          icon: args.buttonIcon,
        },
        organization: {
          name: args.organizationName,
          address: {
            streetAddress: args.organizationStreetAddress,
            addressLocality: args.organizationAddressLocality,
            addressRegion: args.organizationAddressRegion,
            postalCode: args.organizationPostalCode,
            addressCountry: args.organizationAddressCountry,
          },
          email: args.organizationEmail,
          telephone: args.organizationTelephone,
          url: args.organizationUrl,
          foundingDate: args.organizationFoundingDate,
        },
      })
    }
  </Story>
</Canvas>

## Accessibility

Stay tuned!

## Template Properties

- `action`: Object containing settings for the "call to action" section.
  - `leadIn`: The heading text that precedes the button.
  - `title`: The title of the action link. Named `title` for consistency with menus.
  - `link`: The URL for the action link. Named `link` for consistency with menus.
  - `icon`: Optional key to one of [our icons](/docs/design-icons--page) for display in the link.
- `organization`: Object containing Cloud Four details for contact information and copyright. Structure and property names are based on the [the Organization schema](https://schema.org/Organization).
  - `name`
  - `address`
    - `streetAddress`
    - `addressLocality` (city)
    - `addressRegion` (state)
    - `postalCode` (zip)
    - `addressCountry`
  - `email`
  - `telephone`
  - `url`
  - `foundingDate`: Used for start date of default legal content.
- `menu`: An object containing navigation menu `items` to iterate over in the same structure as that expected by [Timber menus](https://timber.github.io/docs/guides/menus/).
- `social`: The same structure as `menu` but for social links. Each item must also contain an `icon` property corresponding to a key from [our icon library](/docs/design-icons--page).
