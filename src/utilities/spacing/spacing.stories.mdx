import { Story, Preview, Meta } from '@storybook/addon-docs/blocks';
import { withKnobs, radios, number } from '@storybook/addon-knobs';
import {
  minimumStep,
  maximumStep,
} from '../../design-tokens/modular-scale.yml';
import logicalPropertiesDemo from './demo/logical-properties.twig';
import directionsDemo from './demo/directions.twig';
import './demo/styles.scss';

<Meta title="Utilities/Spacing" decorators={[withKnobs]} />

# Spacing

While we do our best to predict whitespace needs within the context of our layout objects and components, certain situations are difficult to account for:

- Specific article or page content may require unique spacing.
- [Our unreliable eyes](https://en.wikipedia.org/wiki/Optical_illusion) may prefer alignment tweaks that defy mathematics: For example, circles may appear more visually balanced when they extend past grid lines.
- Rapid prototypes.

Spacing utilities exist for these use cases.

## Logical Properties

All of our utilities use [logical properties](https://www.w3.org/TR/css-logical-1/) instead of specific directions [in supported browsers](https://caniuse.com/#feat=css-logical-props) to simplify potential localization projects.

Observe how the direction of the same utility classes change depending on the page's [direction](https://developer.mozilla.org/en-US/docs/Web/CSS/direction) and [writing mode](https://developer.mozilla.org/en-US/docs/Web/CSS/writing-mode):

<Preview>
  <Story name="Logical Properties" height="420px">
    {logicalPropertiesDemo({
      name: radios('Utility', ['space', 'pad'], 'space'),
      step: number('Step', 1, {
        range: true,
        min: minimumStep,
        max: maximumStep,
        step: 1,
      }),
    })}
  </Story>
</Preview>

The following table maps the traditional physical property for `direction: ltr` and `writing-mode: horizontal-tb` to its equivalent logical property:

| Physical Property | Logical Property |
| ----------------- | ---------------- |
| `top`             | `block-start`    |
| `bottom`          | `block-end`      |
| `left`            | `inline-start`   |
| `right`           | `inline-end`     |

## Padding

The following utilities pad the _inside_ of the element:

- `u-pad-{amount}` adds `padding` to all sides.
- `u-pad-block-{amount}` adds `padding` to the top and bottom for horizontal writing modes.
- `u-pad-block-start-{amount}`
- `u-pad-block-end-{amount}`
- `u-pad-inline-{amount}` adds `padding` to the left and right for left-to-right directions.
- `u-pad-inline-start-{amount}`
- `u-pad-inline-end-{amount}`

`{amount}` may be a step of [our modular scale](/?path=/docs/design-modular-scale--page) or `none`.

<Preview>
  <Story name="Padding" height="320px">
    {directionsDemo({
      name: 'pad',
      step: number('Step', 1, {
        range: true,
        min: minimumStep,
        max: maximumStep,
        step: 1,
      }),
    })}
  </Story>
</Preview>

## Margin

The following utilities apply space _outside_ the element:

- `u-space-{amount}` adds `margin` to all sides.
- `u-space-block-{amount}` adds `margin` to the top and bottom for horizontal writing modes.
- `u-space-block-start-{amount}`
- `u-space-block-end-{amount}`
- `u-space-inline-{amount}` adds `margin` to the left and right for left-to-right directions.
- `u-space-inline-start-{amount}`
- `u-space-inline-end-{amount}`

`{amount}` may be a step of [our modular scale](/?path=/docs/design-modular-scale--page), `auto` or `none`.

<Preview>
  <Story name="Margin" height="320px">
    {directionsDemo({
      name: 'space',
      step: number('Step', 1, {
        range: true,
        min: minimumStep,
        max: maximumStep,
        step: 1,
      }),
    })}
  </Story>
</Preview>

To add consistent spacing between adjacent block elements, see [the rhythm object](/?path=/docs/objects-rhythm--default-story).

## Negative Margin

The following utilities _pull_ an element one direction or another by applying a _negative_ `margin` value:

- `u-pull-{amount}` subtracts `margin` from all sides.
- `u-pull-block-{amount}` subtracts `margin` from the top and bottom for horizontal writing modes.
- `u-pull-block-start-{amount}`
- `u-pull-block-end-{amount}`
- `u-pull-inline-{amount}` subtracts `margin` from the left and right for left-to-right directions.
- `u-pull-inline-start-{amount}`
- `u-pull-inline-end-{amount}`

`{amount}` may be a step of [our modular scale](/?path=/docs/design-modular-scale--page).

<Preview>
  <Story name="Negative Margin" height="320px">
    {directionsDemo({
      name: 'pull',
      step: 1,
    })}
  </Story>
</Preview>
