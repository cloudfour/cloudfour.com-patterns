import { Story, Canvas, Meta } from '@storybook/addon-docs';
import { useEffect } from '@storybook/client-api';
import template from './subscription-choices.twig';
import { initSubscriptionChoices } from './subscription-choices.ts';
// Helper function to initialize toggling button JS
const templateStory = (args) => {
  console.log('templateStory');
  useEffect(() => {
    const templateEls = [
      ...document.querySelectorAll('.js-subscription-choices'),
    ].map((templateEl) => initSubscriptionChoices(templateEl));
    return () => {
      for (const templateEl of templateEls) templateEl.destroy();
    };
  });
  return template(args);
};

<Meta title="Components/Subscription Choices" />

# Subscription Choices

@TODO Update this!

Displays a Subscription Choices, or set of Subscription Choicess, with optional meta content.

<Canvas>
  <Story
    inline={false}
    name="Basic usage"
    args={{
      form_id: 'example-demo',
    }}
  >
    {(args) => templateStory(args)}
  </Story>
</Canvas>

## Template Properties

`class` (string): CSS class(es) to append to the root element

`Subscription Choicess` (array): Array of [Subscription Choices objects](https://timber.github.io/docs/reference/timber-user/#properties) of the type:

```ts
 {
   name: string | () => string;
   avatar: string | () => string;
   link: string | () => string;
 }
```

`Subscription Choices_prefix` (optional, string, default "By"): Used to create a more
accessible user experience by adding visually hidden text, prefixes the Subscription Choices name (e.g. "By Arianna Chau")

`meta` (optional, string): Extra information to be rendered below the Subscription Choices name(s)

`date` (optional, date object): Represents a publication date

`date_prefix` (optional, string, default "Published on"): Used to create a more
accessible user experience by adding visually hidden text, prefixes the date value (e.g. "Published on March 31st, 2021")
